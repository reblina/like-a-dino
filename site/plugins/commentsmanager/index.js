(function(){"use strict";function a(n,e,t,o,d,u,f,p){var s=typeof n=="function"?n.options:n;return e&&(s.render=e,s.staticRenderFns=t,s._compiled=!0),{exports:n,options:s}}window.onclick=function(n){n.target==modal&&(modal.style.display="none")};const l={name:"Comments",extends:"k-field",props:{value:{type:Array},average:{type:Number,default:0}},data(){return{comments:this.value}},methods:{openModal(n){this.selectedCommentID=n,this.$refs.commentDialog.showModal()},closeDialog(){this.$refs.commentDialog.close()},confirmDelete(){this.deleteComment(this.selectedCommentID),this.closeDialog()},deleteComment(n){fetch(`/comment/delete/${n}`,{method:"DELETE"}).then(e=>{e.json().then(t=>{this.comments=this.comments.filter(o=>o.commentID!==n)})}).catch(e=>{console.error("Delete failed:",e)})}}};var i=function(){var e=this,t=e._self._c;return t("k-field",e._b({staticClass:"k-spacing-field"},"k-field",e.$props,!1),[t("div",[e.value.length===0?t("ul",[t("p",[e._v("There are no comments available..")])]):t("ul",[e.average.length!==0?t("ul",[t("p",{staticClass:"rating"},[e._v("Users have rated this picture "+e._s(e.average)+"/5")])]):e._e(),e._l(e.comments,function(o){return t("li",{key:o.commentID,staticClass:"container"},[t("div",{staticClass:"comment"},[t("p",[e._v(e._s(o.username))]),t("p",[e._v(e._s(o.comment))])]),t("button",{staticClass:"delete-button",on:{click:function(d){return e.openModal(o.commentID)}}},[t("k-icon",{attrs:{type:"trash"}})],1)])})],2),t("dialog",{ref:"commentDialog",staticClass:"delete-dialog",on:{click:function(o){return o.target!==o.currentTarget?null:e.closeDialog.apply(null,arguments)}}},[t("p",[e._v("Do you really want to delete this comment?")]),t("div",{staticClass:"dialog-buttons"},[t("button",{on:{click:e.closeDialog}},[t("k-icon",{attrs:{type:"cancel"}}),e._v(" "),t("p",[e._v("Cancel")])],1),t("button",{on:{click:e.confirmDelete}},[t("k-icon",{staticStyle:{color:"red"},attrs:{type:"trash"}}),e._v(" "),t("p",[e._v("Delete")])],1)])])])])},c=[],r=a(l,i,c);const m=r.exports;panel.plugin("comments-manager",{fields:{"comments-manager":m}})})();
